# 学霸君考神系统

## 项目概述
本项目实现了一个名为“学霸君考神系统”的问答系统，借助向量数据库和大语言模型，为用户提供问题解答服务。系统会解析 JSON 格式的数据源，对关键词进行向量化处理并存储到 Chroma 向量数据库中，用户输入问题后，系统会查找相似度最高的答案并结合大语言模型给出回答。

## 技术栈
### 编程语言
- Python：作为主要开发语言，用于实现数据处理、向量计算、模型调用等功能。

### 主要库和框架
1. **ChromaDB**：用于存储和管理向量数据，支持高效的向量相似度查询。
2. **DashScope**：用于调用百炼模型进行文本向量化。
3. **OpenAI API**：用于调用本地部署的 Qwen3 模型和 BGE 模型进行文本向量化和问答生成。
4. **Gradio**：用于快速搭建用户交互界面，方便用户输入问题并获取答案。
5. **FuzzyWuzzy**：用于模糊匹配，查找与用户输入问题最相似的答案。
6. **NumPy**：用于处理数值计算和向量操作。
7. **JSON**：用于解析和处理 JSON 格式的数据源文件。

### 本地服务
- **Ollama**：作为本地模型服务，提供 Qwen3 模型和 BGE 模型的 API 接口。

## 功能实现
### 数据处理
1. **JSON 解析**：读取 `assist/data_source.json` 文件，将其中的 `k_qa_content` 字段按 `#\n` 分割为关键词和答案，并将答案按指定长度进行切割。
2. **向量化处理**：支持两种向量化方式，一是使用 DashScope 的百炼模型 `text_embedding_v2` 进行向量化，二是使用本地部署的 BGE 模型进行向量化。
3. **数据存储**：将向量化后的关键词、对应的答案和唯一标识存储到 ChromaDB 向量数据库中。

### 问答功能
1. **相似度查询**：用户输入问题后，系统使用 FuzzyWuzzy 进行模糊匹配，查找与问题最相似的答案。
2. **答案生成**：结合相似度最高的答案和本地部署的 Qwen3 模型，生成最终的回答。

### 用户界面
使用 Gradio 搭建了一个简单的 Web 界面，用户可以在界面上输入问题，并实时获取系统的回答。

## 运行流程
1. 程序启动时，检查 ChromaDB 中的 `chromadb_rag` 集合是否存在数据。
2. 如果集合为空，解析 JSON 数据源，对关键词进行向量化处理，并将数据存储到集合中。
3. 如果集合不为空，启动 Gradio 界面，等待用户输入问题。
4. 用户输入问题后，系统进行相似度查询和答案生成，并将结果返回给用户。

## 注意事项
- 代码中包含硬编码的 API 密钥，实际使用时应注意安全，避免泄露。
- 本地模型服务依赖于 Ollama，需要确保 Ollama 服务正常运行。
- ChromaDB 服务需要在本地的 8000 端口运行。